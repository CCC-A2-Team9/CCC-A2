<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="Dashboard">
  <meta name="keyword" content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
  <title>Team9 - COMP90024PROJECT2</title>

  <!-- Favicons -->
  <link href="img/teamlogo.png" rel="icon">
  <link href="img/teamlogo.png" rel="apple-touch-icon">

  <!-- Bootstrap core CSS -->
  <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <!--external css-->
  <link href="lib/font-awesome/css/font-awesome.css" rel="stylesheet" />
  <link rel="stylesheet" type="text/css" href="lib/gritter/css/jquery.gritter.css" />
  <!-- Custom styles for this template -->
  <link href="css/style_map.css" rel="stylesheet">
  <link href="css/style-responsive.css" rel="stylesheet">
  <script src="lib/chart-master/Chart.js"></script>
  <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> -->
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.css' rel='stylesheet' />

  <!-- =======================================================
    Template Name: Dashio
    Template URL: https://templatemag.com/dashio-bootstrap-admin-template/
    Author: TemplateMag.com
    License: https://templatemag.com/license/
  ======================================================= -->
</head>

<body>
  <section id="container">
    <!-- **********************************************************************************************************************************************************
        TOP BAR CONTENT & NOTIFICATIONS
        *********************************************************************************************************************************************************** -->
    <!--header start-->
    <header class="header black-bg">
      <div class="sidebar-toggle-box">
        <div class="fa fa-bars tooltips" data-placement="right" data-original-title="Toggle Navigation"></div>
      </div>
      <!--logo start-->
      <a href="index.html" class="logo"><b>COMP90024<span>Project2</span></b></a>
      <!--logo end-->
      <div class="top-menu">
        <ul class="nav pull-right top-menu">
          <li><a class="logout" href="login.html">Logout</a></li>
        </ul>
      </div>
    </header>
    <!--header end-->
    <!-- **********************************************************************************************************************************************************
        MAIN SIDEBAR MENU
        *********************************************************************************************************************************************************** -->
    <!--header start-->
    <header class="header black-bg">
      <div class="sidebar-toggle-box">
        <div class="fa fa-bars tooltips" data-placement="right" data-original-title="Toggle Navigation"></div>
      </div>
      <!--logo start-->
      <a href="index.html" class="logo"><b>COMP90024<span>Project2</span></b></a>
      <!--logo end-->
      <div class="top-menu">
        <ul class="nav pull-right top-menu">
          <li><a class="logout" href="login.html">Logout</a></li>
        </ul>
      </div>
    </header>
    <!--header end-->
    <!-- **********************************************************************************************************************************************************
        MAIN SIDEBAR MENU
        *********************************************************************************************************************************************************** -->
    <!--sidebar start-->
    <aside>
      <div id="sidebar" class="nav-collapse ">
        <!-- sidebar menu start-->
        <ul class="sidebar-menu" id="nav-accordion">
          <p class="centered"><a href="profile.html"><img src="img/teamlogo.png" class="img-circle" width="80"></a></p>
          <h5 class="centered">Team 9</h5>
          <li class="mt">
            <a href="index.html">
              <i class="fa fa-dashboard"></i>
              <span>Dashboard</span>
              </a>
            </li>
          <li class="sub-menu">
            <a href="javascript:;">
              <i class="fa fa-book"></i>
              <span>Team Members</span>
              </a>
            <ul class="sub">
              <li><a href="profile.html">Profile</a></li>
            </ul>
          </li>
          <li class="sub-menu">
            <a class="active" href="javascript:;">
              <i class="fa fa-desktop"></i>
              <span>Scenarios</span>
              </a>
            <ul class="sub">
              <li><a href="Scenario1.html">Scenario 1</a></li>
            </ul>
            <ul class="sub">
              <li><a href="Scenario2.html">Scenario 2</a></li>
            </ul>
            <ul class="sub">
              <li class="active"><a href="Scenario3.html">Scenario 3</a></li>
            </ul>
          </li>
        </ul>
        <!-- sidebar menu end-->
      </div>
    </aside>
    <!--sidebar end-->
    <!-- **********************************************************************************************************************************************************
        MAIN CONTENT
        *********************************************************************************************************************************************************** -->
      <!--main content start-->
      <section id="main-content">
        <section class="wrapper site-min-height">
          <h3><i class="fa fa-angle-right"></i> Scenario 3</h3>
          <div class="row content-panel mt mb">
            <div class="col-md-6">
              <h2 contenteditable="true">Introduction</h2>
            </div>
            <div class="col-md-6">
              <p contenteditable="true" class="mt"> As for scenario 3, we try to explore the relationship between the number of languages used in each suburb and the number of people whose salary reached median employment income.</p>
              <p contenteditable="true"> The main reason for choosing this scenario is that income is one of the most important metrics people are concerned about when they plan and decide to settle down somewhere via considering livability.</p>    
            </div>
          </div>
          <div class="mt"></div>
          <div class="row content-panel mt mb">
            <div class="col-md-6">
              <h2 contenteditable="true">Hypothesis</h2>
            </div>
            <div class="col-md-6">
              <p contenteditable="true" class="mt">For the 11 suburbs in the city of Melbourne, the number of languages used is positively correlated with the number of people whose salary reached median employment income from AURIN.</p>
            </div>
          </div>
          
          <div class="row mt">
            <div class="col-sm-12">
              <section class="panel">
                <header class="panel-heading">
                  Map with Loaction List and corresponding Population
                </header>
                <div class="panel-body">
                  <div id="map"></div>
                </div>
              </section>
            </div>
          </div>
  
          <div id="morris">
            <div class="row mt">
              <div class="col-lg-6">
                <div class="content-panel">
                  <h4><i class="fa fa-angle-right"></i> Histogram of the number of different languages are used for tweeting in given suburb. </h4>
                  <div class="panel-body">
                    <div id="hero-bar" class="graph"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row mt">
              <div class="col-lg-6">
                <div class="content-panel">
                  <h4><i class="fa fa-angle-right"></i> Pie chart of the number of people who reached median employment income in each suburb. </h4>
                  <div class="panel-body">
                   <div id="hero-donut" class="graph"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row mt">
              <div class="col-lg-6">
                <div class="content-panel">
                  <h4><i class="fa fa-angle-right"></i> Regression Result </h4>
                  <center> <h4 id="regression_model">  Regression result </h4> </center>
                  <h4> y =  the number of people who reached median employment income(AUD) in each suburb</h4>
                  <h4> x = the number of different languages are used for tweeting in given suburb</h4>
                  <div class="panel-body">
                    <div id="hero-graph" class="graph"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>  
          <div class="mt"></div>
          <div class="row content-panel mt mb">
            <div class="col-md-6">
              <h2 contenteditable="true"> Conclusion </h2>
            </div>
            <div class="col-md-6">
              <p contenteditable="true" class="mt">For the 11 suburbs in the city of Melbourne, the number of languages used is positively correlated with the number of people whose salary reached median employment income from AURIN.</p>
            </div>
          </div>
        <!-- /MAIN CONTENT -->
        <!--main content end-->
      </section>
    </section>
   
        <!--footer start-->
        <footer class="site-footer">
          <div class="text-center">
            <p>
              &copy; Copyrights <strong>Dashio</strong>. All Rights Reserved
            </p>
            <div class="credits">
              <!--
                You are NOT allowed to delete the credit link to TemplateMag with free version.
                You can delete the credit link only if you bought the pro version.
                Buy the pro version with working PHP/AJAX contact form: https://templatemag.com/dashio-bootstrap-admin-template/
                Licensing information: https://templatemag.com/license/
              -->
              Created with Dashio template by <a href="https://templatemag.com/">TemplateMag</a>
            </div>
            <a href="inline_editor.html#" class="go-top">
              <i class="fa fa-angle-up"></i>
              </a>
          </div>
        </footer>
        <!--footer end-->
    </section>
    <!-- js placed at the end of the document so the pages load faster -->
    <script src="lib/jquery/jquery.min.js"></script>
    <script src="lib/bootstrap/js/bootstrap.min.js"></script>
    <script class="include" type="text/javascript" src="lib/jquery.dcjqaccordion.2.7.js"></script>
    <script src="lib/jquery.scrollTo.min.js"></script>
    <script src="lib/jquery.nicescroll.js" type="text/javascript"></script>
    <!--common script for all pages-->
    <script src="lib/common-scripts.js"></script>
    <!--script for this page-->
    <script src="lib/ckeditor/ckeditor.js"></script>
     <!-- Third-party Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.js'></script>
    <!-- <script src="lib/morris-conf3.js"></script> -->
    <script src="lib/raphael/raphael.min.js"></script>
    <script src="lib/morris/morris.min.js"></script>
  
      <script>
mapboxgl.accessToken = 'pk.eyJ1IjoiamFzbXluenoiLCJhIjoiY2wyOGs3c24yMGE2NjNjcjRuanhnZnFwNyJ9.VbndD4nH-NUhv00plSB13w';
        
        const geojson = {
    "type": "FeatureCollection",
    "features": [
        {
            "geometry": {
                "type": "Point",
                "coordinates": [
                    144.970,
                    -37.780
                ]
            },
            "type": "Feature",
            "properties": {
                "description": "Population: 18,535 ",
                "marker-symbol": "rail-metro",
                "title": "Carlton",
                "url": "https://en.wikipedia.org/wiki/Carlton,_Victoria",
                "lines": [
                    "Green"
                ],
                "address": "Carlton, VIC"
            }
        },
        {
            "geometry": {
                "type": "Point",
                "coordinates": [
                    144.950,
                    -37.810
                ]
            },
            "type": "Feature",
            "properties": {
                "description": "Population: 10,964",
                "marker-symbol": "rail-metro",
                "title": "Docklands",
                "url": "https://en.wikipedia.org/wiki/Docklands,_Victoria7",
                "lines": [
                    "Green"
                ],
                "address": "Docklands, VIC"
            }
        },
        {
            "geometry": {
                "type": "Point",
                "coordinates": [
                    144.990,
                    -37.820
                ]
            },
            "type": "Feature",
            "properties": {
                "description": "Population: 4,964",
                "marker-symbol": "rail-metro",
                "title": "East Melbourne",
                "url": "https://en.wikipedia.org/wiki/East_Melbourne,_Victoria",
                "lines": [
                    "Green"
                ],
                "address": "East Melbourne, VIC"
            }
        },
        {
            "geometry": {
                "type": "Point",
                "coordinates": [
                    144.940,
                    -37.800
                ]
            },
            "type": "Feature",
            "properties": {
                "description": "Population: 10,812",
                "marker-symbol": "rail-metro",
                "title": "Kensington",
                "url": "https://en.wikipedia.org/wiki/Kensington,_Victoria",
                "lines": [
                    "Green"
                ],
                "address": "Kensington, VIC"
            }
        },
        {
            "geometry": {
                "type": "Point",
                "coordinates": [
                    144.770,
                    -38.370
                ]
            },
            "type": "Feature",
            "properties": {
                "description": "Population: 135,959",
                "marker-symbol": "rail-metro",
                "title": "Melbourne",
                "url": "https://www.melbourne.vic.gov.au/about-melbourne/melbourne-profile/suburbs/pages/melbourne.aspx",
                "lines": [
                    "Orange"
                ],
                "address": "Melbourne, VIC"
            }
        },
        {
            "geometry": {
                "type": "Point",
                "coordinates": [
                    145.060,
                    -37.910
                ]
            },
            "type": "Feature",
            "properties": {
                "description": "Population: 14,940",
                "marker-symbol": "rail-metro",
                "title": "North Melbourne",
                "url": "https://en.wikipedia.org/wiki/North_Melbourne,_Victoria",
                "lines": [
                    "Orange"
                ],
                "address": "North Melbourne, VIC"
            }
        },
        {
            "geometry": {
                "type": "Point",
                "coordinates": [
                    144.960,
                    -37.800
                ]
            },
            "type": "Feature",
            "properties": {
                "description": "Population: 7,409",
                "marker-symbol": "rail-metro",
                "title": "Parkville",
                "url": "https://en.wikipedia.org/wiki/Parkville,_Victoria",
                "lines": [
                    "Orange"
                ],
                "address": "Parkville, VIC"
            }
        },
        {
            "geometry": {
                "type": "Point",
                "coordinates": [
                    144.890,
                    -37.850
                ]
            },
            "type": "Feature",
            "properties": {
                "description": "Population: 16,175",
                "marker-symbol": "rail-metro",
                "title": "Port Melbourne",
                "url": "https://en.wikipedia.org/wiki/Port_Melbourne,_Victoria",
                "lines": [
                    "Orange"
                ],
                "address": "Port Melbourne, VIC"
            }
        },
        {
            "geometry": {
                "type": "Point",
                "coordinates": [
                    144.970,
                    -37.820
                ]
            },
            "type": "Feature",
            "properties": {
                "description": "Population: 18,709",
                "marker-symbol": "rail-metro",
                "title": "Southbank",
                "url": "https://en.wikipedia.org/wiki/Southbank,_Victoria",
                "lines": [
                    "Orange"
                ],
                "address": "Southbank, VIC"
            }
        },
        {
            "geometry": {
                "type": "Point",
                "coordinates": [
                    144.060,
                    -36.990
                ]
            },
            "type": "Feature",
            "properties": {
                "description": "Population: 24,171",
                "marker-symbol": "rail-metro",
                "title": "South Yarra",
                "url": "https://en.wikipedia.org/wiki/South_Yarra,_Victoria",
                "lines": [
                    "Orange"
                ],
                "address": "South Yarra, VIC"
            }
        },
        {
            "geometry": {
                "type": "Point",
                "coordinates": [
                    144.930,
                    -37.790
                ]
            },
            "type": "Feature",
            "properties": {
                "description": "Population: 7,719",
                "marker-symbol": "rail-metro",
                "title": "Flemington",
                "url": "https://en.wikipedia.org/wiki/Flemington,_Victoria",
                "lines": [
                    "Orange"
                ],
                "address": "Flemington, VIC"
            }
         }
      ]
     }
        
        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/jasmynzz/cl290kwip000r15nmrde2lsz4',
            center: [144.9631, -37.8136], // Longitude, Latitude of Melbourne
            zoom: 7
        });
        
        // add markers to map
        for (const feature of geojson.features) {
            // create a HTML element for each feature
            const el = document.createElement('div');
            el.className = 'marker';
 
            // make a marker for each feature and add it to the map
            new mapboxgl.Marker(el)
              .setLngLat(feature.geometry.coordinates)
              .setPopup(
               new mapboxgl.Popup({ offset: 25 }) // add popups
                .setHTML(
                  `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
               )
              )
              .addTo(map);
            };
        
       // Data for error handling
       data_test = {
        "Carlton": {"lang": 2, "aurin": 8, "b0": 61976.138, "b1": -2996.17}, 
        "Docklands": {"lang": 6, "aurin": 6.6, "b0": 61976.138, "b1": -2996.17},
        "East Melbourne": {"lang": 5, "aurin": 3.2, "b0": 61976.138, "b1": -2996.17}, 
        "Kensington": {"lang": 4, "aurin": 6.6, "b0": 61976.138, "b1": -2996.17}, 
        "Melbourne": {"lang": 1, "aurin": 21.8, "b0": 61976.138, "b1": -2996.17},
        "North Melbourne": {"lang": 14, "aurin": 11.4, "b0": 61976.138, "b1": -2996.17}, 
        "Parkvile": {"lang": 4, "aurin": 3.2, "b0": 61976.138, "b1": -2996.17}, 
        "Port Melbourne": {"lang": 4, "aurin": 9.9, "b0": 61976.138, "b1": -2996.17}, 
        "Southbank": {"lang": 6, "aurin": 11.5, "b0": 61976.138, "b1": -2996.17}, 
        "South Yarra": {"lang": 2, "aurin": 12.7, "b0": 61976.138, "b1": -2996.17}, 
        "Flemington": {"lang": 5, "aurin": 5.2, "b0": 61976.138, "b1": -2996.17}
      };
      console.log(data_test); 
      
      // Fetch the real-time data from back-end
      var json_ajax_data = (function() {
        var json_data = null;
        $.ajax({
          async: false,
          url:"http://127.0.0.1:5000/dataFromAjax",
          dataType: "json",
          Type: "GET",
          success: function (data) {
            // alert('Successfully updated!');
            json_data = data;
          },
          error:function(){
            alert("fail...");
            // Historial data for error handling
            json_data = data_test;
          }
        });
        return json_data;
      })();

      // Data from tweets analysis
      var tweet_data_list=[];
      for (var key in json_ajax_data){
        tweet_data_list.push({"suburb":key,"lang_num":json_ajax_data[key]["lang"]})
        }
      console.log(tweet_data_list);

      // Histogram for Twitter data 
      Morris.Bar({
        element: 'hero-bar',
        data: tweet_data_list,
        xkey: 'suburb',
        ykeys: ["lang_num"],
        labels: ['The num of language used'],
        barRatio: 0.4,
        xLabelAngle: 35,
        hideHover: 'auto',
        barColors: ['#ac92ec']
      });
      
      // Data from AURIN
      var Aurin_data_list = [];
        for (var key in json_ajax_data){
            Aurin_data_list.push({"label":key,"value":json_ajax_data[key]["aurin"]})
        }
        console.log(Aurin_data_list);
      
      // Pie chart for AURIN data
      Morris.Donut({
        element: 'hero-donut',
        data: Aurin_data_list,
          // colors: ['#3498db', '#2980b9', '#34495e'],
        formatter: function (y) { return y + "%" }
      });

      // Regression coefficient 
      var beta0 = json_ajax_data["Carlton"]["b0"];
      var beta1 = json_ajax_data["Carlton"]["b1"];
      console.log(beta0);
      console.log(beta1);

      // Regression model for AURIN data and Twitter data
      let print_x;
      
      if (beta0< 0) {
        print_x = "x";
      } else {
        print_x = "x+";
      }
      document.getElementById("regression_model").innerHTML ="y="+beta1+print_x+beta0;

      </script>
  
  </body>
  
  </html>
  